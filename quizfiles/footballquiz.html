<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Quiz | Sports Hub</title>
    <link rel="stylesheet" href="../cssfiles/quiz.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <a href="../index.html" class="back-button"><i class="fas fa-arrow-left"></i> Back</a>
        <h1>Football Quiz</h1>
        <p>Test your knowledge of the beautiful game</p>
    </header>

    <div class="main-content">
        <div class="quiz-header">
         
            <p class="quiz-description">
                Challenge yourself with this comprehensive football quiz covering rules, history, famous players, 
                and iconic moments. Select your difficulty level and see how much you really know about the world's most popular sport!
            </p>
            
            <div class="difficulty-selector">
                <button class="difficulty-btn active" data-difficulty="easy">Easy</button>
                <button class="difficulty-btn" data-difficulty="medium">Medium</button>
                <button class="difficulty-btn" data-difficulty="hard">Hard</button>
            </div>
            
            <button id="start-quiz" class="restart-btn">Start Quiz</button>
        </div>

        <div id="quiz-section" style="display: none;">
            <div class="quiz-container">
                <div class="quiz-progress">
                    <span id="question-count">Question 1 of 15</span>
                    <span id="score">Score: 0</span>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                </div>
                
                <div class="question-container">
                    <p class="question-text" id="question-text">What is the maximum number of substitutions allowed in most professional football matches?</p>
                    
                    <div class="options-container" id="options-container">
                        <button class="option-btn"><span class="option-letter">A</span> 3</button>
                        <button class="option-btn"><span class="option-letter">B</span> 5</button>
                        <button class="option-btn"><span class="option-letter">C</span> 7</button>
                        <button class="option-btn"><span class="option-letter">D</span> Unlimited</button>
                    </div>
                    
                    <div class="explanation-container" id="explanation-container">
                        <p class="explanation-title"><i class="fas fa-info-circle"></i> Explanation:</p>
                        <p id="explanation-text">Typically 3 substitutions are allowed, though temporary rules during COVID allowed for 5.</p>
                    </div>
                </div>
                
                <div class="quiz-navigation">
                    <button class="nav-btn next-btn" id="next-btn">Next Question</button>
                    <button class="nav-btn finish-btn" id="finish-btn" style="display: none;">Finish Quiz</button>
                </div>
            </div>
        </div>

        <div class="results-container" id="results-container">
            <div class="results-icon"><i class="fas fa-trophy"></i></div>
            <h2>Quiz Completed!</h2>
            <div class="results-score">
                <span id="final-score">0</span>
                <span>out of</span>
                <span id="total-questions">0</span>
            </div>
            <p class="results-feedback" id="results-feedback">Great job! You know your football!</p>
            <button class="restart-btn" id="restart-btn">Take Quiz Again</button>
        </div>

        <div class="scoreboard" id="scoreboard" style="display: none;">
            <h2><i class="fas fa-chart-line trophy-icon"></i> Your Performance</h2>
            <div class="scoreboard-grid">
                <div class="score-card">
                    <div class="score-category">Correct Answers</div>
                    <div class="score-value" id="score-correct">0</div>
                    <div class="score-description">Well done!</div>
                </div>
                <div class="score-card">
                    <div class="score-category">Wrong Answers</div>
                    <div class="score-value" id="score-wrong">0</div>
                    <div class="score-description">Keep learning!</div>
                </div>
                <div class="score-card">
                    <div class="score-category">Percentage</div>
                    <div class="score-value" id="score-percentage">0%</div>
                    <div class="score-description">Great effort!</div>
                </div>
                <div class="score-card">
                    <div class="score-category">Difficulty</div>
                    <div class="score-value" id="score-difficulty">Easy</div>
                    <div class="score-description" id="difficulty-description">Try a harder level next!</div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2023 Sports Hub. All rights reserved.</p>
        <p>Disclaimer: This platform is for educational and entertainment purposes only.</p>
    </footer>

    <script>
        // Comprehensive quiz data for football
        const quizData = {
            easy: [
                {
                    question: "How many players are on a football team during a match?",
                    options: ["9", "10", "11", "12"],
                    answer: 2,
                    explanation: "A standard football match is played between two teams of 11 players each."
                },
                {
                    question: "What is the maximum number of substitutions allowed in most professional matches?",
                    options: ["3", "5", "7", "Unlimited"],
                    answer: 1,
                    explanation: "Typically 3 substitutions are allowed, though temporary rules during COVID allowed for 5."
                },
                {
                    question: "How long is a standard football match?",
                    options: ["60 minutes", "90 minutes", "120 minutes", "180 minutes"],
                    answer: 1,
                    explanation: "A standard match consists of two 45-minute halves with a 15-minute halftime break."
                },
                {
                    question: "What is the name of the trophy awarded to the World Cup winners?",
                    options: ["European Cup", "FIFA Trophy", "World Cup Trophy", "Jules Rimet Trophy"],
                    answer: 2,
                    explanation: "The current trophy is called the FIFA World Cup Trophy, awarded since 1974."
                },
                {
                    question: "Which of these is NOT a position in football?",
                    options: ["Striker", "Goalkeeper", "Quarterback", "Midfielder"],
                    answer: 2,
                    explanation: "Quarterback is a position in American football, not association football."
                },
                {
                    question: "What color card indicates a sending-off in football?",
                    options: ["Red", "Yellow", "Green", "Blue"],
                    answer: 0,
                    explanation: "A red card means the player must leave the field immediately and cannot be replaced."
                },
                {
                    question: "Which country won the first ever World Cup in 1930?",
                    options: ["Brazil", "Uruguay", "Italy", "Argentina"],
                    answer: 1,
                    explanation: "Uruguay hosted and won the inaugural World Cup in 1930, defeating Argentina 4-2 in the final."
                },
                {
                    question: "What is the name of the annual competition between Barcelona and Real Madrid?",
                    options: ["Derby della Madonnina", "El Clásico", "The North London Derby", "Der Klassiker"],
                    answer: 1,
                    explanation: "El Clásico is the name given to any match between these two rival Spanish clubs."
                },
                {
                    question: "Which player is known as 'The Egyptian King' in the Premier League?",
                    options: ["Mohamed Salah", "Sadio Mané", "Pierre-Emerick Aubameyang", "Riyad Mahrez"],
                    answer: 0,
                    explanation: "Mohamed Salah, who plays for Liverpool, is nicknamed 'The Egyptian King' by fans."
                },
                {
                    question: "What is the minimum number of players a team needs to avoid forfeiting a match?",
                    options: ["5", "6", "7", "8"],
                    answer: 2,
                    explanation: "A match is abandoned if a team has fewer than 7 players on the field."
                }
            ],
            medium: [
                {
                    question: "Which country has won the most FIFA World Cup titles?",
                    options: ["Germany", "Brazil", "Italy", "Argentina"],
                    answer: 1,
                    explanation: "Brazil has won the World Cup 5 times (1958, 1962, 1970, 1994, 2002)."
                },
                {
                    question: "What is the name of the trophy awarded to the Champions League winners?",
                    options: ["European Cup", "Big Ears", "Golden Ball", "Jules Rimet Trophy"],
                    answer: 1,
                    explanation: "The trophy is nicknamed 'Big Ears' due to its large handles."
                },
                {
                    question: "Which player has scored the most goals in a single calendar year?",
                    options: ["Lionel Messi (2012)", "Cristiano Ronaldo (2013)", "Gerd Müller (1972)", "Pelé (1958)"],
                    answer: 0,
                    explanation: "Messi scored 91 goals in 2012, a Guinness World Record."
                },
                {
                    question: "Which club has won the most Champions League titles?",
                    options: ["Barcelona", "Bayern Munich", "Real Madrid", "AC Milan"],
                    answer: 2,
                    explanation: "Real Madrid has won the Champions League 14 times as of 2022."
                },
                {
                    question: "What is the offside rule designed to prevent?",
                    options: ["Goal hanging", "Time wasting", "Dangerous play", "Handball"],
                    answer: 0,
                    explanation: "The offside rule prevents attackers from waiting near the opponent's goal."
                },
                {
                    question: "Which player has made the most Premier League appearances?",
                    options: ["Ryan Giggs", "Gareth Barry", "Frank Lampard", "James Milner"],
                    answer: 1,
                    explanation: "Gareth Barry holds the record with 653 appearances as of 2022."
                },
                {
                    question: "What is the nickname of the French national team?",
                    options: ["The Three Lions", "Les Bleus", "La Roja", "Azzurri"],
                    answer: 1,
                    explanation: "The French team is called 'Les Bleus' (The Blues) due to their blue jerseys."
                },
                {
                    question: "Which country hosted the first World Cup held in Africa?",
                    options: ["Egypt", "South Africa", "Morocco", "Nigeria"],
                    answer: 1,
                    explanation: "South Africa hosted the 2010 World Cup, the first on the African continent."
                },
                {
                    question: "What is the minimum length of a football pitch in meters?",
                    options: ["90", "100", "105", "110"],
                    answer: 1,
                    explanation: "The minimum pitch length is 100m, maximum 110m (FIFA regulations)."
                },
                {
                    question: "Which player has won the most Ballon d'Or awards?",
                    options: ["Cristiano Ronaldo", "Lionel Messi", "Michel Platini", "Johan Cruyff"],
                    answer: 1,
                    explanation: "As of 2022, Messi has won 7 Ballon d'Or awards."
                }
            ],
            hard: [
                {
                    question: "Which player has scored the most goals in a single Premier League season?",
                    options: ["Alan Shearer (1994-95)", "Mohamed Salah (2017-18)", "Erling Haaland (2022-23)", "Andy Cole (1993-94)"],
                    answer: 2,
                    explanation: "Erling Haaland scored 36 goals in the 2022-23 season, breaking the previous record."
                },
                {
                    question: "Which team went undefeated in the 2003-04 Premier League season?",
                    options: ["Manchester United", "Chelsea", "Arsenal", "Liverpool"],
                    answer: 2,
                    explanation: "Arsenal's 'Invincibles' went 38 matches without losing in the 2003-04 season."
                },
                {
                    question: "Who is the only player to score in three different Champions League finals for three different clubs?",
                    options: ["Cristiano Ronaldo", "Samuel Eto'o", "Zlatan Ibrahimović", "Clarence Seedorf"],
                    answer: 1,
                    explanation: "Samuel Eto'o scored for Real Madrid (2000), Barcelona (2006, 2009), and Inter Milan (2010)."
                },
                {
                    question: "Which country has appeared in the most World Cup finals without ever winning?",
                    options: ["Netherlands", "Hungary", "Sweden", "Czech Republic"],
                    answer: 0,
                    explanation: "The Netherlands has reached 3 finals (1974, 1978, 2010) but never won."
                },
                {
                    question: "What is the record transfer fee paid for a goalkeeper (as of 2023)?",
                    options: ["€65m - Alisson", "€72.5m - Kepa", "€80m - Ederson", "€85m - Onana"],
                    answer: 1,
                    explanation: "Kepa Arrizabalaga's €72.5m transfer to Chelsea in 2018 holds the record."
                },
                {
                    question: "Which player holds the record for most goals in a single World Cup tournament?",
                    options: ["Just Fontaine (1958)", "Gerd Müller (1970)", "Ronaldo (2002)", "Miroslav Klose (2006)"],
                    answer: 0,
                    explanation: "Just Fontaine scored 13 goals in the 1958 World Cup in Sweden."
                },
                {
                    question: "Which country has the most registered football players?",
                    options: ["Brazil", "Germany", "United States", "China"],
                    answer: 2,
                    explanation: "The US has over 24 million registered players, more than any other country."
                },
                {
                    question: "Who was the first African player to win the Ballon d'Or?",
                    options: ["George Weah", "Samuel Eto'o", "Didier Drogba", "Yaya Touré"],
                    answer: 0,
                    explanation: "George Weah won the Ballon d'Or in 1995 while playing for AC Milan."
                },
                {
                    question: "Which stadium has the highest seating capacity in Europe?",
                    options: ["Camp Nou (Barcelona)", "Wembley (London)", "Signal Iduna Park (Dortmund)", "San Siro (Milan)"],
                    answer: 0,
                    explanation: "Camp Nou has a capacity of 99,354, making it Europe's largest football stadium."
                },
                {
                    question: "Which player has the most assists in Premier League history?",
                    options: ["Ryan Giggs", "Cesc Fàbregas", "Wayne Rooney", "Kevin De Bruyne"],
                    answer: 0,
                    explanation: "Ryan Giggs holds the record with 162 assists in his Premier League career."
                }
            ]
        };

        // Quiz state variables
        let currentDifficulty = 'easy';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let quizStarted = false;
        let userAnswers = [];
        let quizSessionId = generateSessionId();

        // DOM elements
        const startQuizBtn = document.getElementById('start-quiz');
        const quizSection = document.getElementById('quiz-section');
        const resultsContainer = document.getElementById('results-container');
        const scoreboard = document.getElementById('scoreboard');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        const questionCount = document.getElementById('question-count');
        const scoreDisplay = document.getElementById('score');
        const progressBar = document.getElementById('progress-bar');
        const finalScore = document.getElementById('final-score');
        const totalQuestions = document.getElementById('total-questions');
        const resultsFeedback = document.getElementById('results-feedback');
        const restartBtn = document.getElementById('restart-btn');
        const scoreCorrect = document.getElementById('score-correct');
        const scoreWrong = document.getElementById('score-wrong');
        const scorePercentage = document.getElementById('score-percentage');
        const scoreDifficulty = document.getElementById('score-difficulty');
        const difficultyDescription = document.getElementById('difficulty-description');

        // Event listeners
        startQuizBtn.addEventListener('click', startQuiz);
        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                difficultyBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentDifficulty = btn.dataset.difficulty;
            });
        });
        nextBtn.addEventListener('click', nextQuestion);
        finishBtn.addEventListener('click', finishQuiz);
        restartBtn.addEventListener('click', restartQuiz);

        // Generate a unique session ID for backend tracking
        function generateSessionId() {
            return 'quiz-' + Date.now() + '-' + Math.floor(Math.random() * 10000);
        }

        // Start the quiz
        function startQuiz() {
            quizStarted = true;
            currentQuestions = [...quizData[currentDifficulty]];
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            
            // Shuffle questions but keep the first few to ensure variety
            currentQuestions = shuffleArray(currentQuestions);
            
            // Limit to 10 questions for better user experience
            if (currentQuestions.length > 10) {
                currentQuestions = currentQuestions.slice(0, 10);
            }
            
            startQuizBtn.style.display = 'none';
            quizSection.style.display = 'block';
            resultsContainer.style.display = 'none';
            scoreboard.style.display = 'none';
            
            updateScore();
            showQuestion();
        }

        // Show current question
        function showQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            questionText.textContent = question.question;
            
            // Clear previous options
            optionsContainer.innerHTML = '';
            
            // Add new options with animation delay
            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `<span class="option-letter">${String.fromCharCode(65 + index)}</span> ${option}`;
                btn.addEventListener('click', () => selectAnswer(index));
                btn.style.animationDelay = `${index * 0.1}s`;
                optionsContainer.appendChild(btn);
            });
            
            // Hide explanation
            explanationContainer.style.display = 'none';
            
            // Update progress
            questionCount.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuestions.length}`;
            progressBar.style.width = `${((currentQuestionIndex + 1) / currentQuestions.length) * 100}%`;
            
            // Show/hide next/finish buttons
            nextBtn.style.display = 'block';
            finishBtn.style.display = 'none';
            
            if (currentQuestionIndex === currentQuestions.length - 1) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'block';
            }
        }

        // Handle answer selection
        function selectAnswer(selectedIndex) {
            const question = currentQuestions[currentQuestionIndex];
            const optionBtns = document.querySelectorAll('.option-btn');
            
            // Disable all options
            optionBtns.forEach(btn => {
                btn.disabled = true;
                btn.style.cursor = 'not-allowed';
            });
            
            // Mark correct and wrong answers
            optionBtns[question.answer].classList.add('correct');
            if (selectedIndex !== question.answer) {
                optionBtns[selectedIndex].classList.add('wrong');
            }
            
            // Store user answer for analytics
            userAnswers.push({
                question: question.question,
                userAnswer: question.options[selectedIndex],
                correctAnswer: question.options[question.answer],
                isCorrect: selectedIndex === question.answer
            });
            
            // Update score if correct
            if (selectedIndex === question.answer) {
                score++;
                updateScore();
            }
            
            // Show explanation
            explanationText.textContent = question.explanation;
            explanationContainer.style.display = 'block';
        }

        // Move to next question
        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        // Finish the quiz
        function finishQuiz() {
            quizSection.style.display = 'none';
            resultsContainer.style.display = 'block';
            scoreboard.style.display = 'block';
            
            finalScore.textContent = score;
            totalQuestions.textContent = currentQuestions.length;
            
            // Update scoreboard
            scoreCorrect.textContent = score;
            scoreWrong.textContent = currentQuestions.length - score;
            const percentage = Math.round((score / currentQuestions.length) * 100);
            scorePercentage.textContent = `${percentage}%`;
            
            // Set difficulty display
            scoreDifficulty.textContent = currentDifficulty.charAt(0).toUpperCase() + currentDifficulty.slice(1);
            
            // Provide feedback based on percentage
            let feedback = "";
            let difficultySuggestion = "";
            
            if (percentage >= 90) {
                feedback = "Perfect score! You're a football genius! Consider trying the hard difficulty next!";
                difficultySuggestion = "You mastered this level! Try hard difficulty!";
            } else if (percentage >= 75) {
                feedback = "Excellent! You have an impressive knowledge of football!";
                difficultySuggestion = "Great job! Try medium or hard next!";
            } else if (percentage >= 50) {
                feedback = "Good effort! You know your football but have room to improve!";
                difficultySuggestion = "Nice try! Practice more or try medium difficulty!";
            } else {
                feedback = "Keep practicing! Watch more matches and learn the rules to improve!";
                difficultySuggestion = "Keep learning! Stick with this level until you improve!";
            }
            
            resultsFeedback.textContent = feedback;
            difficultyDescription.textContent = difficultySuggestion;
            
            // Prepare data for backend (to be implemented later)
            const quizResults = {
                sessionId: quizSessionId,
                difficulty: currentDifficulty,
                score: score,
                totalQuestions: currentQuestions.length,
                percentage: percentage,
                answers: userAnswers,
                timestamp: new Date().toISOString()
            };
            
            // For now, just log to console - will be sent to backend later
            console.log("Quiz results:", quizResults);
            localStorage.setItem('latestQuizResults', JSON.stringify(quizResults));
        }

        // Restart the quiz
        function restartQuiz() {
            quizSessionId = generateSessionId();
            startQuizBtn.style.display = 'inline-block';
            resultsContainer.style.display = 'none';
            scoreboard.style.display = 'none';
            quizStarted = false;
        }

        // Update score display
        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }

        // Helper function to shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
    </script>
</body>
</html>